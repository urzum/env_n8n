// IMPORTANTE: Substitua o conteudo abaixo completo at√© com os concheques []. Exemplo: [URLs] = proj.smileia.com.br
// [URLs] = substitua pelo dom√≠nio do seu projeto. Ex: proj.smileia.com.br
// [SENHA_DB] = substitua pela senha do banco de dados
// [SENHA_ENCRYPTION_KEY] = substitua pela senha de criptografia
// Ap√≥s substitui√ß√£o, copie todo o conteudo abaixo e cole no editor do EasyPanel.
{
  "services": [
    {
      "type": "app",
      "data": {
        "projectName": "n8n",
        "serviceName": "n8n_main",
        "source": {
          "type": "image",
          "image": "n8nio/n8n"
        },
        "env": "############################################\n# üóÑÔ∏è Banco de Dados (Postgres)\n############################################\nDB_TYPE=postgresdb\nDB_POSTGRESDB_HOST=n8n_postgres\nDB_POSTGRESDB_PORT=5432\nDB_POSTGRESDB_DATABASE=n8n\nDB_POSTGRESDB_USER=postgres\nDB_POSTGRESDB_PASSWORD=[SENHA_DB]\n\n############################################\n# üß∞ Fila / Redis (BullMQ)\n############################################\nQUEUE_BULL_REDIS_HOST=n8n_redis\nQUEUE_BULL_REDIS_PORT=6379\nQUEUE_BULL_REDIS_PASSWORD=[SENHA_DB]\n\n############################################\n# üèÉ Execu√ß√µes (Queue Mode, reten√ß√£o, prune)\n############################################\nEXECUTIONS_MODE=queue\nEXECUTIONS_TIMEOUT=1800\nEXECUTIONS_TIMEOUT_MAX=3600\nEXECUTIONS_DATA_SAVE_ON_SUCCESS=all\nEXECUTIONS_DATA_SAVE_ON_ERROR=all\nEXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true\nEXECUTIONS_DATA_PRUNE=true\nEXECUTIONS_DATA_MAX_AGE=336\nEXECUTIONS_DATA_PRUNE_HARD_DELETE_INTERVAL=15\nEXECUTIONS_DATA_HARD_DELETE_BUFFER=1\nEXECUTIONS_DATA_PRUNE_MAX_COUNT=10000\n\n# Offload manual executions para os workers (recomendado em fila)\nOFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS=true\n\n############################################\n# üìà M√©tricas / Prometheus\n############################################\nN8N_METRICS=true\nN8N_METRICS_INCLUDE_MESSAGE_EVENT_BUS_METRICS=true\nN8N_METRICS_INCLUDE_WORKFLOW_ID_LABEL=true\nN8N_METRICS_QUEUE_METRICS_INTERVAL=20\n\n############################################\n# üåê Hostname / URLs / Protocolo\n############################################\nN8N_PROTOCOL=https\nN8N_HOST=main.[URLs]\nN8N_EDITOR_BASE_URL=https://main.[URLs]/\nWEBHOOK_URL=https://wh.[URLs]/\n\n############################################\n# üîê Seguran√ßa / Runtime\n############################################\nN8N_ENCRYPTION_KEY=[SENHA_ENCRYPTION_KEY]\nN8N_DIAGNOSTICS_ENABLED=false\nN8N_INSECURE_DISABLE_WEBHOOK_IFRAME_SANDBOX=true\nN8N_COMMUNITY_PACKAGES_ALLOW_TOOL_USAGE=true\nN8N_GIT_NODE_DISABLE_BARE_REPOS=true\nN8N_RUNNERS_ENABLED=false\nN8N_BLOCK_ENV_ACCESS_IN_NODE=false\n\n############################################\n# üß† Fun√ß√µes / Bibliotecas permitidas (Code node)\n############################################\nNODE_ENV=production\nNODE_FUNCTION_ALLOW_EXTERNAL=moment,lodash,moment-with-locales\n\n############################################\n# ü™µ Logs\n############################################\nN8N_LOG_LEVEL=debug\nN8N_LOG_OUTPUT=file,console\nN8N_LOG_FILE_LOCATION=/home/node/.n8n/logs/n8nmain.log\n\n############################################\n# üïí Timezone\n############################################\nGENERIC_TIMEZONE=America/Sao_Paulo\nTZ=America/Sao_Paulo",
        "deploy": {
          "replicas": 1,
          "command": "n8n start",
          "zeroDowntime": true
        },
        "domains": [
          {
            "host": "main.[URLs]",
            "https": true,
            "port": 5678,
            "path": "/",
            "middlewares": [],
            "certificateResolver": "",
            "wildcard": false,
            "internalProtocol": "http"
          }
        ],
        "mounts": [
          {
            "type": "volume",
            "name": "data",
            "mountPath": "/home/node/.n8n"
          }
        ]
      }
    },
    {
      "type": "app",
      "data": {
        "projectName": "n8n",
        "serviceName": "n8n_mcp",
        "source": {
          "type": "image",
          "image": "n8nio/n8n"
        },
        "env": "############################################\n# üóÑÔ∏è Banco de Dados (Postgres)\n############################################\nDB_TYPE=postgresdb\nDB_POSTGRESDB_HOST=n8n_postgres\nDB_POSTGRESDB_PORT=5432\nDB_POSTGRESDB_DATABASE=n8n\nDB_POSTGRESDB_USER=postgres\nDB_POSTGRESDB_PASSWORD=[SENHA_DB]\n\n############################################\n# üß∞ Fila / Redis (BullMQ)\n############################################\nQUEUE_BULL_REDIS_HOST=n8n_redis\nQUEUE_BULL_REDIS_PORT=6379\nQUEUE_BULL_REDIS_PASSWORD=[SENHA_DB]\n\n############################################\n# üèÉ Execu√ß√µes (Queue Mode, reten√ß√£o, prune)\n############################################\nEXECUTIONS_MODE=queue\nEXECUTIONS_TIMEOUT=1800\nEXECUTIONS_TIMEOUT_MAX=3600\nEXECUTIONS_DATA_SAVE_ON_SUCCESS=all\nEXECUTIONS_DATA_SAVE_ON_ERROR=all\nEXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true\nEXECUTIONS_DATA_PRUNE=true\nEXECUTIONS_DATA_MAX_AGE=336\nEXECUTIONS_DATA_PRUNE_HARD_DELETE_INTERVAL=15\nEXECUTIONS_DATA_HARD_DELETE_BUFFER=1\nEXECUTIONS_DATA_PRUNE_MAX_COUNT=10000\n\n# Offload manual executions para os workers (recomendado em fila)\nOFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS=true\n\n############################################\n# üìà M√©tricas / Prometheus\n############################################\nN8N_METRICS=true\nN8N_METRICS_INCLUDE_MESSAGE_EVENT_BUS_METRICS=true\nN8N_METRICS_INCLUDE_WORKFLOW_ID_LABEL=true\nN8N_METRICS_QUEUE_METRICS_INTERVAL=20\n\n############################################\n# üåê Hostname / URLs / Protocolo\n############################################\nN8N_PROTOCOL=https\nN8N_HOST=main.[URLs]\nN8N_EDITOR_BASE_URL=https://main.[URLs]/\nWEBHOOK_URL=https://wh.[URLs]/\n\n############################################\n# üîê Seguran√ßa / Runtime\n############################################\nN8N_ENCRYPTION_KEY=[SENHA_ENCRYPTION_KEY]\nN8N_DIAGNOSTICS_ENABLED=false\nN8N_INSECURE_DISABLE_WEBHOOK_IFRAME_SANDBOX=true\nN8N_COMMUNITY_PACKAGES_ALLOW_TOOL_USAGE=true\nN8N_GIT_NODE_DISABLE_BARE_REPOS=true\nN8N_RUNNERS_ENABLED=false\nN8N_BLOCK_ENV_ACCESS_IN_NODE=false\n\n############################################\n# üß† Fun√ß√µes / Bibliotecas permitidas (Code node)\n############################################\nNODE_ENV=production\nNODE_FUNCTION_ALLOW_EXTERNAL=moment,lodash,moment-with-locales\n\n############################################\n# ü™µ Logs\n############################################\nN8N_LOG_LEVEL=debug\nN8N_LOG_OUTPUT=file,console\nN8N_LOG_FILE_LOCATION=/home/node/.n8n/logs/n8nmcp.log\n\n############################################\n# üïí Timezone\n############################################\nGENERIC_TIMEZONE=America/Sao_Paulo\nTZ=America/Sao_Paulo",
        "deploy": {
          "replicas": 1,
          "command": "n8n webhook",
          "zeroDowntime": true
        },
        "domains": [
          {
            "host": "wh.[URLs]/mcp",
            "https": true,
            "port": 5678,
            "path": "/",
            "middlewares": [],
            "certificateResolver": "",
            "wildcard": false,
            "internalProtocol": "http"
          }
        ],
        "mounts": [
          {
            "type": "volume",
            "name": "data",
            "mountPath": "/home/node/.n8n"
          }
        ]
      }
    },
    {
      "type": "app",
      "data": {
        "projectName": "n8n",
        "serviceName": "n8n_wh",
        "source": {
          "type": "image",
          "image": "n8nio/n8n"
        },
        "env": "############################################\n# üóÑÔ∏è Banco de Dados (Postgres)\n############################################\nDB_TYPE=postgresdb\nDB_POSTGRESDB_HOST=n8n_postgres\nDB_POSTGRESDB_PORT=5432\nDB_POSTGRESDB_DATABASE=n8n\nDB_POSTGRESDB_USER=postgres\nDB_POSTGRESDB_PASSWORD=[SENHA_DB]\n\n############################################\n# üß∞ Fila / Redis (BullMQ)\n############################################\nQUEUE_BULL_REDIS_HOST=n8n_redis\nQUEUE_BULL_REDIS_PORT=6379\nQUEUE_BULL_REDIS_PASSWORD=[SENHA_DB]\n\n############################################\n# üèÉ Execu√ß√µes (Queue Mode, reten√ß√£o, prune)\n############################################\nEXECUTIONS_MODE=queue\nEXECUTIONS_TIMEOUT=1800\nEXECUTIONS_TIMEOUT_MAX=3600\nEXECUTIONS_DATA_SAVE_ON_SUCCESS=all\nEXECUTIONS_DATA_SAVE_ON_ERROR=all\nEXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true\nEXECUTIONS_DATA_PRUNE=true\nEXECUTIONS_DATA_MAX_AGE=336\nEXECUTIONS_DATA_PRUNE_HARD_DELETE_INTERVAL=15\nEXECUTIONS_DATA_HARD_DELETE_BUFFER=1\nEXECUTIONS_DATA_PRUNE_MAX_COUNT=10000\n\n# Offload manual executions para os workers (recomendado em fila)\nOFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS=true\n\n############################################\n# üìà M√©tricas / Prometheus\n############################################\nN8N_METRICS=true\nN8N_METRICS_INCLUDE_MESSAGE_EVENT_BUS_METRICS=true\nN8N_METRICS_INCLUDE_WORKFLOW_ID_LABEL=true\nN8N_METRICS_QUEUE_METRICS_INTERVAL=20\n\n############################################\n# üåê Hostname / URLs / Protocolo\n############################################\nN8N_PROTOCOL=https\nN8N_HOST=main.[URLs]\nN8N_EDITOR_BASE_URL=https://main.[URLs]/\nWEBHOOK_URL=https://wh.[URLs]/\n\n############################################\n# üîê Seguran√ßa / Runtime\n############################################\nN8N_ENCRYPTION_KEY=[SENHA_ENCRYPTION_KEY]\nN8N_DIAGNOSTICS_ENABLED=false\nN8N_INSECURE_DISABLE_WEBHOOK_IFRAME_SANDBOX=true\nN8N_COMMUNITY_PACKAGES_ALLOW_TOOL_USAGE=true\nN8N_GIT_NODE_DISABLE_BARE_REPOS=true\nN8N_RUNNERS_ENABLED=false\nN8N_BLOCK_ENV_ACCESS_IN_NODE=false\n\n############################################\n# üß† Fun√ß√µes / Bibliotecas permitidas (Code node)\n############################################\nNODE_ENV=production\nNODE_FUNCTION_ALLOW_EXTERNAL=moment,lodash,moment-with-locales\n\n############################################\n# ü™µ Logs\n############################################\nN8N_LOG_LEVEL=debug\nN8N_LOG_OUTPUT=file,console\nN8N_LOG_FILE_LOCATION=/home/node/.n8n/logs/n8nwebhook.log\n\n############################################\n# üïí Timezone\n############################################\nGENERIC_TIMEZONE=America/Sao_Paulo\nTZ=America/Sao_Paulo",
        "deploy": {
          "replicas": 1,
          "command": "n8n webhook",
          "zeroDowntime": true
        },
        "domains": [
          {
            "host": "wh.[URLs]",
            "https": true,
            "port": 5678,
            "path": "/",
            "middlewares": [],
            "certificateResolver": "",
            "wildcard": false,
            "internalProtocol": "http"
          }
        ],
        "mounts": [
          {
            "type": "volume",
            "name": "data",
            "mountPath": "/home/node/.n8n"
          }
        ]
      }
    },
    {
      "type": "app",
      "data": {
        "projectName": "n8n",
        "serviceName": "n8n_work",
        "source": {
          "type": "image",
          "image": "n8nio/n8n"
        },
        "env": "############################################\n# üóÑÔ∏è Banco de Dados (Postgres)\n############################################\nDB_TYPE=postgresdb\nDB_POSTGRESDB_HOST=n8n_postgres\nDB_POSTGRESDB_PORT=5432\nDB_POSTGRESDB_DATABASE=n8n\nDB_POSTGRESDB_USER=postgres\nDB_POSTGRESDB_PASSWORD=[SENHA_DB]\n\n############################################\n# üß∞ Fila / Redis (BullMQ)\n############################################\nQUEUE_BULL_REDIS_HOST=n8n_redis\nQUEUE_BULL_REDIS_PORT=6379\nQUEUE_BULL_REDIS_PASSWORD=[SENHA_DB]\n\n############################################\n# üèÉ Execu√ß√µes (Queue Mode, reten√ß√£o, prune)\n############################################\nEXECUTIONS_MODE=queue\nEXECUTIONS_TIMEOUT=1800\nEXECUTIONS_TIMEOUT_MAX=3600\nEXECUTIONS_DATA_SAVE_ON_SUCCESS=all\nEXECUTIONS_DATA_SAVE_ON_ERROR=all\nEXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true\nEXECUTIONS_DATA_PRUNE=true\nEXECUTIONS_DATA_MAX_AGE=336\nEXECUTIONS_DATA_PRUNE_HARD_DELETE_INTERVAL=15\nEXECUTIONS_DATA_HARD_DELETE_BUFFER=1\nEXECUTIONS_DATA_PRUNE_MAX_COUNT=10000\n\n# Offload manual executions para os workers (recomendado em fila)\nOFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS=true\n\n############################################\n# üìà M√©tricas / Prometheus\n############################################\nN8N_METRICS=true\nN8N_METRICS_INCLUDE_MESSAGE_EVENT_BUS_METRICS=true\nN8N_METRICS_INCLUDE_WORKFLOW_ID_LABEL=true\nN8N_METRICS_QUEUE_METRICS_INTERVAL=20\n\n############################################\n# üåê Hostname / URLs / Protocolo\n############################################\nN8N_PROTOCOL=https\nN8N_HOST=main.[URLs]\nN8N_EDITOR_BASE_URL=https://main.[URLs]/\nWEBHOOK_URL=https://wh.[URLs]/\n\n############################################\n# üîê Seguran√ßa / Runtime\n############################################\nN8N_ENCRYPTION_KEY=[SENHA_ENCRYPTION_KEY]\nN8N_DIAGNOSTICS_ENABLED=false\nN8N_INSECURE_DISABLE_WEBHOOK_IFRAME_SANDBOX=true\nN8N_COMMUNITY_PACKAGES_ALLOW_TOOL_USAGE=true\nN8N_GIT_NODE_DISABLE_BARE_REPOS=true\nN8N_RUNNERS_ENABLED=false\nN8N_BLOCK_ENV_ACCESS_IN_NODE=false\n\n############################################\n# üß† Fun√ß√µes / Bibliotecas permitidas (Code node)\n############################################\nNODE_ENV=production\nNODE_FUNCTION_ALLOW_EXTERNAL=moment,lodash,moment-with-locales\n\n############################################\n# ü™µ Logs\n############################################\nN8N_LOG_LEVEL=debug\nN8N_LOG_OUTPUT=file,console\nN8N_LOG_FILE_LOCATION=/home/node/.n8n/logs/n8nwork.log\n\n############################################\n# üïí Timezone\n############################################\nGENERIC_TIMEZONE=America/Sao_Paulo\nTZ=America/Sao_Paulo",
        "deploy": {
          "replicas": 1,
          "command": "n8n worker --concurrency=30",
          "zeroDowntime": true
        },
        "domains": [
          {
            "host": "wk.[URLs]",
            "https": true,
            "port": 5678,
            "path": "/",
            "middlewares": [],
            "certificateResolver": "",
            "wildcard": false,
            "internalProtocol": "http"
          }
        ],
        "mounts": [
          {
            "type": "volume",
            "name": "data",
            "mountPath": "/home/node/.n8n"
          }
        ]
      }
    },
    {
      "type": "postgres",
      "data": {
        "projectName": "n8n",
        "serviceName": "postgres",
        "image": "postgres:17",
        "password": "[SENHA_DB]"
      }
    },
    {
      "type": "redis",
      "data": {
        "projectName": "n8n",
        "serviceName": "redis",
        "image": "redis:7",
        "password": "[SENHA_DB]"
      }
    }
  ]
}